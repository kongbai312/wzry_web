import{r as me,u as ge,g as he,I as H,T as V,P as Se,c as Ce,H as be}from"./index-CHZlIUU9.js";import{e as I,b as K,c as _,a as c,d as A,h as Q,au as ke,n as k,E as S,I as Ie,w as D,R as X,t as P,G as U,r as m,a3 as Oe,ae as ee,af as we,l as T,ax as xe,N as te,ay as ne,g as Pe,O as G,_ as oe,a4 as ae,L as Te,M as se,am as ze,J as Be,az as pe,F as _e,aA as Ae,i as j,aB as De,T as Ee,aC as Le,aD as Re,H as Ne,ad as $e,j as Me}from"./index-CnghQ47d.js";function le(e){const t=K();t&&I(t.proxy,e)}const[Ue,p]=_("loading"),je=Array(12).fill(null).map((e,t)=>c("i",{class:p("line",String(t+1))},null)),Ye=c("svg",{class:p("circular"),viewBox:"25 25 50 50"},[c("circle",{cx:"50",cy:"50",r:"20",fill:"none"},null)]),Fe={size:k,type:S("circular"),color:String,vertical:Boolean,textSize:k,textColor:String};var He=A({name:Ue,props:Fe,setup(e,{slots:t}){const n=Q(()=>I({color:e.color},ke(e.size))),i=()=>{const a=e.type==="spinner"?je:Ye;return c("span",{class:p("spinner",e.type),style:n.value},[t.icon?t.icon():a])},o=()=>{var a;if(t.default)return c("span",{class:p("text"),style:{fontSize:Ie(e.textSize),color:(a=e.textColor)!=null?a:e.color}},[t.default()])};return()=>{const{type:a,vertical:s}=e;return c("div",{class:p([a,{vertical:s}]),"aria-live":"polite","aria-busy":!0},[i(),o()])}}});const ce=D(He),[Ke,w]=_("button"),Xe=I({},me,{tag:S("button"),text:String,icon:String,type:S("default"),size:S("normal"),color:String,block:Boolean,plain:Boolean,round:Boolean,square:Boolean,loading:Boolean,hairline:Boolean,disabled:Boolean,iconPrefix:String,nativeType:S("button"),loadingSize:k,loadingText:String,loadingType:String,iconPosition:S("left")});var Ge=A({name:Ke,props:Xe,emits:["click"],setup(e,{emit:t,slots:n}){const i=ge(),o=()=>n.loading?n.loading():c(ce,{size:e.loadingSize,type:e.loadingType,class:w("loading")},null),a=()=>{if(e.loading)return o();if(n.icon)return c("div",{class:w("icon")},[n.icon()]);if(e.icon)return c(H,{name:e.icon,class:w("icon"),classPrefix:e.iconPrefix},null)},s=()=>{let l;if(e.loading?l=e.loadingText:l=n.default?n.default():e.text,l)return c("span",{class:w("text")},[l])},u=()=>{const{color:l,plain:d}=e;if(l){const r={color:d?l:"white"};return d||(r.background=l),l.includes("gradient")?r.border=0:r.borderColor=l,r}},g=l=>{e.loading?X(l):e.disabled||(t("click",l),i())};return()=>{const{tag:l,type:d,size:r,block:v,round:y,plain:h,square:C,loading:b,disabled:E,hairline:L,nativeType:Y,iconPosition:R}=e,N=[w([d,r,{plain:h,block:v,round:y,square:C,loading:b,disabled:E,hairline:L}]),{[he]:L}];return c(l,{type:Y,class:N,style:u(),disabled:E,onClick:g},{default:()=>[c("div",{class:w("content")},[R==="left"&&a(),s(),R==="right"&&a()])]})}}});const kt=D(Ge),ie={show:Boolean,zIndex:k,overlay:P,duration:k,teleport:[String,Object],lockScroll:P,lazyRender:P,beforeClose:Function,overlayStyle:Object,overlayClass:U,transitionAppear:Boolean,closeOnClickOverlay:P},It=Object.keys(ie);function Ve(e,t){return e>t?"horizontal":t>e?"vertical":""}function qe(){const e=m(0),t=m(0),n=m(0),i=m(0),o=m(0),a=m(0),s=m(""),u=m(!0),g=()=>s.value==="vertical",l=()=>s.value==="horizontal",d=()=>{n.value=0,i.value=0,o.value=0,a.value=0,s.value="",u.value=!0};return{move:y=>{const h=y.touches[0];n.value=(h.clientX<0?0:h.clientX)-e.value,i.value=h.clientY-t.value,o.value=Math.abs(n.value),a.value=Math.abs(i.value);const C=10;(!s.value||o.value<C&&a.value<C)&&(s.value=Ve(o.value,a.value)),u.value&&(o.value>V||a.value>V)&&(u.value=!1)},start:y=>{d(),e.value=y.touches[0].clientX,t.value=y.touches[0].clientY},reset:d,startX:e,startY:t,deltaX:n,deltaY:i,offsetX:o,offsetY:a,direction:s,isVertical:g,isHorizontal:l,isTap:u}}let z=0;const q="van-overflow-hidden";function Ze(e,t){const n=qe(),i="01",o="10",a=d=>{n.move(d);const r=n.deltaY.value>0?o:i,v=xe(d.target,e.value),{scrollHeight:y,offsetHeight:h,scrollTop:C}=v;let b="11";C===0?b=h>=y?"00":"01":C+h>=y&&(b="10"),b!=="11"&&n.isVertical()&&!(parseInt(b,2)&parseInt(r,2))&&X(d,!0)},s=()=>{document.addEventListener("touchstart",n.start),document.addEventListener("touchmove",a,{passive:!1}),z||document.body.classList.add(q),z++},u=()=>{z&&(document.removeEventListener("touchstart",n.start),document.removeEventListener("touchmove",a),z--,z||document.body.classList.remove(q))},g=()=>t()&&s(),l=()=>t()&&u();Oe(g),ee(l),we(l),T(t,d=>{d?s():u()})}function re(e){const t=m(!1);return T(e,n=>{n&&(t.value=n)},{immediate:!0}),n=>()=>t.value?n():null}const Z=()=>{var e;const{scopeId:t}=((e=K())==null?void 0:e.vnode)||{};return t?{[t]:""}:null},[Je,We]=_("overlay"),Qe={show:Boolean,zIndex:k,duration:k,className:U,lockScroll:P,lazyRender:P,customStyle:Object};var et=A({name:Je,props:Qe,setup(e,{slots:t}){const n=m(),i=re(()=>e.show||!e.lazyRender),o=s=>{e.lockScroll&&X(s,!0)},a=i(()=>{var s;const u=I(Pe(e.zIndex),e.customStyle);return G(e.duration)&&(u.animationDuration=`${e.duration}s`),oe(c("div",{ref:n,style:u,class:[We(),e.className]},[(s=t.default)==null?void 0:s.call(t)]),[[ae,e.show]])});return te("touchmove",o,{target:n}),()=>c(ne,{name:"van-fade",appear:!0},{default:a})}});const tt=D(et),nt=I({},ie,{round:Boolean,position:S("center"),closeIcon:S("cross"),closeable:Boolean,transition:String,iconPrefix:String,closeOnPopstate:Boolean,closeIconPosition:S("top-right"),safeAreaInsetTop:Boolean,safeAreaInsetBottom:Boolean}),[ot,J]=_("popup");var at=A({name:ot,inheritAttrs:!1,props:nt,emits:["open","close","opened","closed","keydown","update:show","clickOverlay","clickCloseIcon"],setup(e,{emit:t,attrs:n,slots:i}){let o,a;const s=m(),u=m(),g=re(()=>e.show||!e.lazyRender),l=Q(()=>{const f={zIndex:s.value};if(G(e.duration)){const O=e.position==="center"?"animationDuration":"transitionDuration";f[O]=`${e.duration}s`}return f}),d=()=>{o||(o=!0,s.value=e.zIndex!==void 0?+e.zIndex:Ae(),t("open"))},r=()=>{o&&Ce(e.beforeClose,{done(){o=!1,t("close"),t("update:show",!1)}})},v=f=>{t("clickOverlay",f),e.closeOnClickOverlay&&r()},y=()=>{if(e.overlay)return c(tt,j({show:e.show,class:e.overlayClass,zIndex:s.value,duration:e.duration,customStyle:e.overlayStyle,role:e.closeOnClickOverlay?"button":void 0,tabindex:e.closeOnClickOverlay?0:void 0},Z(),{onClick:v}),{default:i["overlay-content"]})},h=f=>{t("clickCloseIcon",f),r()},C=()=>{if(e.closeable)return c(H,{role:"button",tabindex:0,name:e.closeIcon,class:[J("close-icon",e.closeIconPosition),be],classPrefix:e.iconPrefix,onClick:h},null)};let b;const E=()=>{b&&clearTimeout(b),b=setTimeout(()=>{t("opened")})},L=()=>t("closed"),Y=f=>t("keydown",f),R=g(()=>{var f;const{round:O,position:$,safeAreaInsetTop:F,safeAreaInsetBottom:ye}=e;return oe(c("div",j({ref:u,style:l.value,role:"dialog",tabindex:0,class:[J({round:O,[$]:$}),{"van-safe-area-top":F,"van-safe-area-bottom":ye}],onKeydown:Y},n,Z()),[(f=i.default)==null?void 0:f.call(i),C()]),[[ae,e.show]])}),N=()=>{const{position:f,transition:O,transitionAppear:$}=e,F=f==="center"?"van-fade":`van-popup-slide-${f}`;return c(ne,{name:O||F,appear:$,onAfterEnter:E,onAfterLeave:L},{default:R})};return T(()=>e.show,f=>{f&&!o&&(d(),n.tabindex===0&&Te(()=>{var O;(O=u.value)==null||O.focus()})),!f&&o&&(o=!1,t("close"))}),le({popupRef:u}),Ze(u,()=>e.show&&e.lockScroll),te("popstate",()=>{e.closeOnPopstate&&(r(),a=!1)}),se(()=>{e.show&&d()}),ze(()=>{a&&(t("update:show",!0),a=!1)}),ee(()=>{e.show&&e.teleport&&(r(),a=!0)}),Be(Se,()=>e.show),()=>e.teleport?c(pe,{to:e.teleport},{default:()=>[y(),N()]}):c(_e,null,[y(),N()])}});const st=D(at);let B=0;function lt(e){e?(B||document.body.classList.add("van-toast--unclickable"),B++):B&&(B--,B||document.body.classList.remove("van-toast--unclickable"))}const[ct,x]=_("toast"),it=["show","overlay","teleport","transition","overlayClass","overlayStyle","closeOnClickOverlay","zIndex"],rt={icon:String,show:Boolean,type:S("text"),overlay:Boolean,message:k,iconSize:k,duration:Le(2e3),position:S("middle"),teleport:[String,Object],wordBreak:String,className:U,iconPrefix:String,transition:S("van-fade"),loadingType:String,forbidClick:Boolean,overlayClass:U,overlayStyle:Object,closeOnClick:Boolean,closeOnClickOverlay:Boolean,zIndex:k};var ue=A({name:ct,props:rt,emits:["update:show"],setup(e,{emit:t,slots:n}){let i,o=!1;const a=()=>{const r=e.show&&e.forbidClick;o!==r&&(o=r,lt(o))},s=r=>t("update:show",r),u=()=>{e.closeOnClick&&s(!1)},g=()=>clearTimeout(i),l=()=>{const{icon:r,type:v,iconSize:y,iconPrefix:h,loadingType:C}=e;if(r||v==="success"||v==="fail")return c(H,{name:r||v,size:y,class:x("icon"),classPrefix:h},null);if(v==="loading")return c(ce,{class:x("loading"),size:y,type:C},null)},d=()=>{const{type:r,message:v}=e;if(n.message)return c("div",{class:x("text")},[n.message()]);if(G(v)&&v!=="")return r==="html"?c("div",{key:0,class:x("text"),innerHTML:String(v)},null):c("div",{class:x("text")},[v])};return T(()=>[e.show,e.forbidClick],a),T(()=>[e.show,e.type,e.message,e.duration],()=>{g(),e.show&&e.duration>0&&(i=setTimeout(()=>{s(!1)},e.duration))}),se(a),De(a),()=>c(st,j({class:[x([e.position,e.wordBreak==="normal"?"break-normal":e.wordBreak,{[e.type]:!e.icon}]),e.className],lockScroll:!1,onClick:u,onClosed:g,"onUpdate:show":s},Ee(e,it)),{default:()=>[l(),d()]})}});function ut(){const e=Ne({show:!1}),t=o=>{e.show=o},n=o=>{I(e,o,{transitionAppear:!0}),t(!0)},i=()=>t(!1);return le({open:n,close:i,toggle:t}),{open:n,close:i,state:e,toggle:t}}function dt(e){const t=Re(e),n=document.createElement("div");return document.body.appendChild(n),{instance:t.mount(n),unmount(){t.unmount(),document.body.removeChild(n)}}}const ft={icon:"",type:"text",message:"",className:"",overlay:!1,onClose:void 0,onOpened:void 0,duration:2e3,teleport:"body",iconSize:void 0,iconPrefix:void 0,position:"middle",transition:"van-fade",forbidClick:!1,loadingType:void 0,overlayClass:"",overlayStyle:void 0,closeOnClick:!1,closeOnClickOverlay:!1};let M=[],vt=!1,W=I({},ft);const yt=new Map;function de(e){return Me(e)?e:{message:e}}function mt(){const{instance:e,unmount:t}=dt({setup(){const n=m(""),{open:i,state:o,close:a,toggle:s}=ut(),u=()=>{},g=()=>c(ue,j(o,{onClosed:u,"onUpdate:show":s}),null);return T(n,l=>{o.message=l}),K().render=g,{open:i,close:a,message:n}}});return e}function gt(){if(!M.length||vt){const e=mt();M.push(e)}return M[M.length-1]}function fe(e={}){if(!$e)return{};const t=gt(),n=de(e);return t.open(I({},W,yt.get(n.type||W.type),n)),t}const ve=e=>t=>fe(I({type:e},de(t))),ht=ve("success"),St=ve("fail");D(ue);const Ot={success:(e,t)=>{ht({message:e,position:t})},info:(e,t)=>{fe({message:e,position:t})},fail:(e,t)=>{St({message:e,position:t})}};export{kt as B,st as P,ie as a,qe as b,dt as c,ut as d,Ot as m,It as p,le as u};
