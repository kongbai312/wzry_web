import{j as H,d as G,a4 as ye,w as D,ax as ue,b as u,a3 as z,y as Ve,E as Pe,k as U,ad as de,x as ve,a8 as we,t as R,r as y,n as w,a9 as L,ac as Me,z as Ie,m as le,aj as Te,D as ee,L as te,M as A,au as me,Q as Y,a0 as Be,aw as ze,A as Q,ay as Ee,I as $e,az as Ge,K as qe,N as Ne,a7 as Re,an as je,o as E,g as j,p as N,a as S,e as T,f as B,i as O,F as Z,v as be,q as oe,H as De,c as se}from"./index-M4brf8cj.js";import{a as Fe,T as Ae}from"./index-D8hGmpKz.js";import{_ as Le}from"./narback.vue_vue_type_script_setup_true_lang-Ba80wPVm.js";import{m as W,B as ge}from"./vantTool-DsKiJpMc.js";import{u as ie}from"./use-expose-DPr-92Zh.js";import{I as We,_ as re}from"./_plugin-vue_export-helper-BQC3p5UF.js";import{H as fe,L as Oe}from"./use-route-BrlykrmF.js";import{c as he}from"./interceptor-F55hFJrP.js";import{a as He,D as Ue}from"./index-C2nGsrtI.js";import"./index-uSd81ZUp.js";import{b as Ke}from"./index-QNMI0kE-.js";import"./use-placeholder-ChelFdm0.js";import"./use-id-Bia0DeqN.js";const[pe,Xe]=H("checkbox-group"),Je={max:z,shape:Ve("round"),disabled:Boolean,iconSize:z,direction:String,modelValue:Pe(),checkedColor:String},_e=Symbol(pe);var Qe=G({name:pe,props:Je,emits:["change","update:modelValue"],setup(e,{emit:l,slots:d}){const{children:r,linkChildren:c}=ye(_e),i=a=>l("update:modelValue",a),o=(a={})=>{typeof a=="boolean"&&(a={checked:a});const{checked:h,skipDisabled:C}=a,v=r.filter(s=>s.props.bindGroup?s.props.disabled&&C?s.checked.value:h??!s.checked.value:!1).map(s=>s.name);i(v)};return D(()=>e.modelValue,a=>l("change",a)),ie({toggleAll:o}),ue(()=>e.modelValue),c({props:e,updateValue:i}),()=>{var a;return u("div",{class:Xe([e.direction])},[(a=d.default)==null?void 0:a.call(d)])}}});const ke=U(Qe),xe={name:de,disabled:Boolean,iconSize:z,modelValue:de,checkedColor:String,labelPosition:String,labelDisabled:Boolean};var Ye=G({props:ve({},xe,{bem:we(Function),role:String,shape:String,parent:Object,checked:Boolean,bindGroup:R,indeterminate:{type:Boolean,default:null}}),emits:["click","toggle"],setup(e,{emit:l,slots:d}){const r=y(),c=s=>{if(e.parent&&e.bindGroup)return e.parent.props[s]},i=w(()=>{if(e.parent&&e.bindGroup){const s=c("disabled")||e.disabled;if(e.role==="checkbox"){const k=c("modelValue").length,x=c("max"),P=x&&k>=+x;return s||P&&!e.checked}return s}return e.disabled}),o=w(()=>c("direction")),a=w(()=>{const s=e.checkedColor||c("checkedColor");if(s&&e.checked&&!i.value)return{borderColor:s,backgroundColor:s}}),h=w(()=>e.shape||c("shape")||"round"),C=s=>{const{target:k}=s,x=r.value,P=x===k||(x==null?void 0:x.contains(k));!i.value&&(P||!e.labelDisabled)&&l("toggle"),l("click",s)},m=()=>{var s,k;const{bem:x,checked:P,indeterminate:g}=e,n=e.iconSize||c("iconSize");return u("div",{ref:r,class:x("icon",[h.value,{disabled:i.value,checked:P,indeterminate:g}]),style:h.value!=="dot"?{fontSize:L(n)}:{width:L(n),height:L(n),borderColor:(s=a.value)==null?void 0:s.borderColor}},[d.icon?d.icon({checked:P,disabled:i.value}):h.value!=="dot"?u(We,{name:g?"minus":"success",style:a.value},null):u("div",{class:x("icon--dot__icon"),style:{backgroundColor:(k=a.value)==null?void 0:k.backgroundColor}},null)])},v=()=>{const{checked:s}=e;if(d.default)return u("span",{class:e.bem("label",[e.labelPosition,{disabled:i.value}])},[d.default({checked:s,disabled:i.value})])};return()=>{const s=e.labelPosition==="left"?[v(),m()]:[m(),v()];return u("div",{role:e.role,class:e.bem([{disabled:i.value,"label-disabled":e.labelDisabled},o.value]),tabindex:i.value?void 0:0,"aria-checked":e.checked,onClick:C},[s])}}});const[Ze,et]=H("checkbox"),tt=ve({},xe,{shape:String,bindGroup:R,indeterminate:{type:Boolean,default:null}});var nt=G({name:Ze,props:tt,emits:["change","update:modelValue"],setup(e,{emit:l,slots:d}){const{parent:r}=Me(_e),c=a=>{const{name:h}=e,{max:C,modelValue:m}=r.props,v=m.slice();if(a)!(C&&v.length>=+C)&&!v.includes(h)&&(v.push(h),e.bindGroup&&r.updateValue(v));else{const s=v.indexOf(h);s!==-1&&(v.splice(s,1),e.bindGroup&&r.updateValue(v))}},i=w(()=>r&&e.bindGroup?r.props.modelValue.indexOf(e.name)!==-1:!!e.modelValue),o=(a=!i.value)=>{r&&e.bindGroup?c(a):l("update:modelValue",a),e.indeterminate!==null&&l("change",a)};return D(()=>e.modelValue,a=>{e.indeterminate===null&&l("change",a)}),ie({toggle:o,props:e,checked:i}),ue(()=>e.modelValue),()=>u(Ye,le({bem:et,role:"checkbox",parent:r,checked:i.value,onToggle:o},e),Ie(d,["default","icon"]))}});const Se=U(nt),[at,ne]=H("progress"),lt={color:String,inactive:Boolean,pivotText:String,textColor:String,showPivot:R,pivotColor:String,trackColor:String,strokeWidth:z,percentage:{type:z,default:0,validator:e=>+e>=0&&+e<=100}};var ot=G({name:at,props:lt,setup(e){const l=w(()=>e.inactive?void 0:e.color),d=()=>{const{textColor:r,pivotText:c,pivotColor:i,percentage:o}=e,a=c??`${o}%`;if(e.showPivot&&a){const h={color:r,left:`${+o}%`,transform:`translate(-${+o}%,-50%)`,background:i||l.value};return u("span",{style:h,class:ne("pivot",{inactive:e.inactive})},[a])}};return()=>{const{trackColor:r,percentage:c,strokeWidth:i}=e,o={background:r,height:L(i)},a={width:`${c}%`,background:l.value};return u("div",{class:ne(),style:o},[u("span",{class:ne("portion",{inactive:e.inactive}),style:a},null),d()])}}});const st=U(ot),[ut,X]=H("stepper"),it=200,J=(e,l)=>String(e)===String(l),rt={min:A(1),max:A(1/0),name:A(""),step:A(1),theme:String,integer:Boolean,disabled:Boolean,showPlus:R,showMinus:R,showInput:R,longPress:R,autoFixed:R,allowEmpty:Boolean,modelValue:z,inputWidth:z,buttonSize:z,placeholder:String,disablePlus:Boolean,disableMinus:Boolean,disableInput:Boolean,beforeChange:Function,defaultValue:A(1),decimalLength:z};var ct=G({name:ut,props:rt,emits:["plus","blur","minus","focus","change","overlimit","update:modelValue"],setup(e,{emit:l}){const d=(t,f=!0)=>{const{min:_,max:F,allowEmpty:I,decimalLength:K}=e;return I&&t===""||(t=me(String(t),!e.integer),t=t===""?0:+t,t=Number.isNaN(t)?+_:t,t=f?Math.max(Math.min(+F,t),+_):t,Y(K)&&(t=t.toFixed(+K))),t},r=()=>{var t;const f=(t=e.modelValue)!=null?t:e.defaultValue,_=d(f);return J(_,e.modelValue)||l("update:modelValue",_),_};let c;const i=y(),o=y(r()),a=w(()=>e.disabled||e.disableMinus||+o.value<=+e.min),h=w(()=>e.disabled||e.disablePlus||+o.value>=+e.max),C=w(()=>({width:L(e.inputWidth),height:L(e.buttonSize)})),m=w(()=>Te(e.buttonSize)),v=()=>{const t=d(o.value);J(t,o.value)||(o.value=t)},s=t=>{e.beforeChange?he(e.beforeChange,{args:[t],done(){o.value=t}}):o.value=t},k=()=>{if(c==="plus"&&h.value||c==="minus"&&a.value){l("overlimit",c);return}const t=c==="minus"?-e.step:+e.step,f=d(Ee(+o.value,t));s(f),l(c)},x=t=>{const f=t.target,{value:_}=f,{decimalLength:F}=e;let I=me(String(_),!e.integer);if(Y(F)&&I.includes(".")){const ce=I.split(".");I=`${ce[0]}.${ce[1].slice(0,+F)}`}e.beforeChange?f.value=String(o.value):J(_,I)||(f.value=I);const K=I===String(+I);s(K?+I:I)},P=t=>{var f;e.disableInput?(f=i.value)==null||f.blur():l("focus",t)},g=t=>{const f=t.target,_=d(f.value,e.autoFixed);f.value=String(_),o.value=_,Be(()=>{l("blur",t),ze()})};let n,b;const V=()=>{b=setTimeout(()=>{k(),V()},it)},M=()=>{e.longPress&&(n=!1,clearTimeout(b),b=setTimeout(()=>{n=!0,k(),V()},Oe))},$=t=>{e.longPress&&(clearTimeout(b),n&&Q(t))},q=t=>{e.disableInput&&Q(t)},p=t=>({onClick:f=>{Q(f),c=t,k()},onTouchstartPassive:()=>{c=t,M()},onTouchend:$,onTouchcancel:$});return D(()=>[e.max,e.min,e.integer,e.decimalLength],v),D(()=>e.modelValue,t=>{J(t,o.value)||(o.value=d(t))}),D(o,t=>{l("update:modelValue",t),l("change",t,{name:e.name})}),ue(()=>e.modelValue),()=>u("div",{role:"group",class:X([e.theme])},[ee(u("button",le({type:"button",style:m.value,class:[X("minus",{disabled:a.value}),{[fe]:!a.value}],"aria-disabled":a.value||void 0},p("minus")),null),[[te,e.showMinus]]),ee(u("input",{ref:i,type:e.integer?"tel":"text",role:"spinbutton",class:X("input"),value:o.value,style:C.value,disabled:e.disabled,readonly:e.disableInput,inputmode:e.integer?"numeric":"decimal",placeholder:e.placeholder,autocomplete:"off","aria-valuemax":e.max,"aria-valuemin":e.min,"aria-valuenow":o.value,onBlur:g,onInput:x,onFocus:P,onMousedown:q},null),[[te,e.showInput]]),ee(u("button",le({type:"button",style:m.value,class:[X("plus",{disabled:h.value}),{[fe]:!h.value}],"aria-disabled":h.value||void 0},p("plus")),null),[[te,e.showPlus]])])}});const dt=U(ct),[mt,ae]=H("swipe-cell"),ft={name:A(""),disabled:Boolean,leftWidth:z,rightWidth:z,beforeClose:Function,stopPropagation:Boolean};var vt=G({name:mt,props:ft,emits:["open","close","click"],setup(e,{emit:l,slots:d}){let r,c,i,o;const a=y(),h=y(),C=y(),m=$e({offset:0,dragging:!1}),v=Ke(),s=t=>t.value?Ne(t).width:0,k=w(()=>Y(e.leftWidth)?+e.leftWidth:s(h)),x=w(()=>Y(e.rightWidth)?+e.rightWidth:s(C)),P=t=>{m.offset=t==="left"?k.value:-x.value,r||(r=!0,l("open",{name:e.name,position:t}))},g=t=>{m.offset=0,r&&(r=!1,l("close",{name:e.name,position:t}))},n=t=>{const f=Math.abs(m.offset),_=.15,F=r?1-_:_,I=t==="left"?k.value:x.value;I&&f>I*F?P(t):g(t)},b=t=>{e.disabled||(i=m.offset,v.start(t))},V=t=>{if(e.disabled)return;const{deltaX:f}=v;v.move(t),v.isHorizontal()&&(c=!0,m.dragging=!0,(!r||f.value*i<0)&&Q(t,e.stopPropagation),m.offset=Re(f.value+i,-x.value,k.value))},M=()=>{m.dragging&&(m.dragging=!1,n(m.offset>0?"left":"right"),setTimeout(()=>{c=!1},0))},$=(t="outside",f)=>{o||(l("click",t),r&&!c&&(o=!0,he(e.beforeClose,{args:[{event:f,name:e.name,position:t}],done:()=>{o=!1,g(t)},canceled:()=>o=!1,error:()=>o=!1})))},q=(t,f)=>_=>{f&&_.stopPropagation(),!c&&$(t,_)},p=(t,f)=>{const _=d[t];if(_)return u("div",{ref:f,class:ae(t),onClick:q(t,!0)},[_()])};return ie({open:P,close:g}),Ge(a,t=>$("outside",t),{eventName:"touchstart"}),qe("touchmove",V,{target:a}),()=>{var t;const f={transform:`translate3d(${m.offset}px, 0, 0)`,transitionDuration:m.dragging?"0s":".6s"};return u("div",{ref:a,class:ae(),onClick:q("cell",c),onTouchstartPassive:b,onTouchend:M,onTouchcancel:M},[u("div",{class:ae("wrapper"),style:f},[p("left",h),(t=d.default)==null?void 0:t.call(d),p("right",C)])])}}});const bt=U(vt),Ce=je("xx-bsMaps",()=>({bsMaps:y({bs:{text:"宝石",value:"bs",map:["硬石矿井","十面埋伏","嗖嗖作响"]},jk:{text:"金库",value:"jk",map:["轰隆峡谷","安全区域","烫手山芋"]},sj:{text:"赏金",value:"sj",map:["蝮蛇草场","神秘流星","大运河"]},tt:{text:"淘汰",value:"tt",map:["摇滚贝尔","烈焰凤凰","空旷荒野"]},rq:{text:"热区",value:"rq",map:["开门营业","平行游戏","甲虫决斗"]},zq:{text:"足球",value:"zq",map:["后院球场","三重威胁","绿荫球场"]}})}),{persist:{key:"bs-maps",paths:["bsMaps"]}}),gt={class:"mode"},ht={class:"buttonGroup"},pt={class:"randomButton_container"},_t={class:"percentage_container"},kt={key:0,class:"mapShow"},xt=G({__name:"bsMap",setup(e){const l=y([]),d=y(),r=()=>{d.value.toggleAll(!0)},c=()=>{d.value.toggleAll()};let i=y(0),o=y(1),a=y(!1);const h=async()=>{for(i.value=0,await new Promise(g=>setTimeout(g,500));i.value<100;){const g=Math.floor(Math.random()*10)+1;i.value+=g,i.value>=100&&(i.value=100),await new Promise(n=>setTimeout(n,50))}a.value=!1},C=Ce();let m=w(()=>C.bsMaps),v=y([]);function s(g,n){const b=[],V=new Set;for(;V.size<g;){const M=Math.floor(Math.random()*n.length);V.has(M)||(V.add(M),b.push(n[M]))}return b}const k=()=>{let g={};l.value.forEach(b=>{g[b]=m.value[b].map});let n=o.value;if(n<l.value.length){let b=s(n,l.value);v.value=b.map(V=>({mode:V,value:s(1,g[V])[0]}))}else if(n===l.value.length)v.value=l.value.map(b=>({mode:b,value:s(1,g[b])[0]}));else if(n>l.value.length){let b=l.value.reduce((p,t)=>(p=p+m.value[t].map.length,p),0);if(n>b){W.fail("抽取错误，原因：配置地图的数量少于抽取数量");return}let V=[],M=l.value.map(p=>{let t=s(1,g[p])[0];return g[p].forEach(f=>{f!==t&&V.push({mode:p,value:f})}),{mode:p,value:t}}),$=n-l.value.length,q=s($,V);v.value=[...M,...q]}},x=async()=>{if(a.value){W.info("当前正在抽取");return}if(l.value.length===0){W.info("模式不能为空");return}v.value=[],a.value=!0,await h(),k()},P=g=>({bs:"宝石：",jk:"金库：",rq:"热区：",sj:"赏金：",tt:"淘汰：",zq:"足球："})[g]||"";return(g,n)=>{const b=Se,V=ke,M=ge,$=dt,q=st;return E(),j(Z,null,[n[13]||(n[13]=N("div",{class:"title"},"地图抽取工具",-1)),N("div",gt,[n[12]||(n[12]=N("span",{class:"modetext"},"模式：",-1)),u(V,{ref_key:"checkboxGroup",ref:d,class:"modeGroup",modelValue:B(l),"onUpdate:modelValue":n[0]||(n[0]=p=>O(l)?l.value=p:null),direction:"horizontal"},{default:S(()=>[u(b,{class:"modeItem",name:"bs"},{default:S(()=>n[2]||(n[2]=[T("宝石")])),_:1}),u(b,{class:"modeItem",name:"jk"},{default:S(()=>n[3]||(n[3]=[T("金库")])),_:1}),u(b,{class:"modeItem",name:"sj"},{default:S(()=>n[4]||(n[4]=[T("赏金")])),_:1}),u(b,{class:"modeItem",name:"tt"},{default:S(()=>n[5]||(n[5]=[T("淘汰")])),_:1}),u(b,{class:"modeItem",name:"rq"},{default:S(()=>n[6]||(n[6]=[T("热区")])),_:1}),u(b,{class:"modeItem",name:"zq"},{default:S(()=>n[7]||(n[7]=[T("足球")])),_:1})]),_:1},8,["modelValue"]),N("div",ht,[u(M,{type:"primary",onClick:r},{default:S(()=>n[8]||(n[8]=[T("全选")])),_:1}),u(M,{type:"primary",onClick:c},{default:S(()=>n[9]||(n[9]=[T("反选")])),_:1})]),N("div",pt,[n[11]||(n[11]=T(" 数量：")),u($,{modelValue:B(o),"onUpdate:modelValue":n[1]||(n[1]=p=>O(o)?o.value=p:o=p),min:"1",max:"7",integer:""},null,8,["modelValue"]),u(M,{round:"",type:"success",class:"randomButton",onClick:x},{default:S(()=>n[10]||(n[10]=[T("抽取")])),_:1})]),N("div",_t,[u(q,{percentage:B(i),"stroke-width":"8"},null,8,["percentage"])])]),B(v).length!==0?(E(),j("div",kt,[(E(!0),j(Z,null,be(B(v),(p,t)=>(E(),j("span",{class:"mapItem",key:t},oe(P(p.mode))+oe(p.value),1))),128))])):De("",!0)],64)}}}),St=re(xt,[["__scopeId","data-v-a75fedf8"]]),Ct={class:"bsMapSetting_container"},yt={class:"dropdown_container"},Vt=1,Pt=G({__name:"bsMapSetting",setup(e){let l=y([{text:"宝石",value:"bs"},{text:"金库",value:"jk"},{text:"赏金",value:"sj"},{text:"淘汰",value:"tt"},{text:"热区",value:"rq"},{text:"足球",value:"zq"}]),d=y("bs");const r={bs:{name:"bs",value:["硬石矿井","水晶街机厅","戈壁陷阱","宝石要塞","十面埋伏","嗖嗖作响","矿车飞驰","乡趣游乐场","开阔地带","终点站","清理森林","更酷的硬石矿井"]},jk:{name:"jk",value:["轰隆峡谷","安全区域","烫手山芋","遥远的桥","超大湖泊","重制废屋"]},sj:{name:"sj",value:["蝮蛇草场","神秘流星","草丛迷踪","大运河","夹心蛋糕","责任自负"]},tt:{name:"tt",value:["金臂峡谷","摇滚贝尔","烈焰凤凰","空旷荒野","新地平线","四重关卡","中心字母","两河并行","森林深处","袖珍岛屿","咆哮神庙","青翠废墟"]},rq:{name:"rq",value:["开门营业","平行游戏","灼热火圈","甲虫决斗","水上运动","吵闹领居"]},zq:{name:"zq",value:["后院球场","三重威胁","精准射门","绿荫球场","超级海滩","梦幻弹珠","中心舞台","沙滩足球","阳光球场","点球大战","二次进攻","十字球场"]}};let c=w(()=>r[d.value].value);const i=Ce();let o=w(()=>i.bsMaps),a=y([]);a.value=o.value[d.value].map,D(()=>d.value,(C,m)=>{o.value[m].map=a.value,a.value=o.value[C].map}),D(()=>a.value,(C,m)=>{C.length<Vt&&(W.info("地图最小选择数量为1"),a.value=m)});const h=()=>{o.value[d.value].map=a.value,W.success("保存成功")};return(C,m)=>{const v=He,s=Ue,k=ge,x=Se,P=bt,g=ke;return E(),j("div",Ct,[N("div",yt,[u(s,null,{default:S(()=>[u(v,{modelValue:B(d),"onUpdate:modelValue":m[0]||(m[0]=n=>O(d)?d.value=n:d=n),options:B(l)},null,8,["modelValue","options"])]),_:1}),u(k,{class:"save_button",type:"success",onClick:h},{default:S(()=>m[2]||(m[2]=[T("保存")])),_:1})]),u(g,{class:"mapGroup",modelValue:B(a),"onUpdate:modelValue":m[1]||(m[1]=n=>O(a)?a.value=n:a=n)},{default:S(()=>[(E(!0),j(Z,null,be(B(c),(n,b)=>(E(),se(P,{class:"mapsItem",key:b},{right:S(()=>[u(k,{square:"",text:"删除",type:"danger",class:"delete-button"})]),default:S(()=>[u(x,{class:"mapItem",name:n},{default:S(()=>[T(oe(n),1)]),_:2},1032,["name"])]),_:2},1024))),128))]),_:1},8,["modelValue"])])}}}),wt=re(Pt,[["__scopeId","data-v-89b68b57"]]),Mt={class:"bs_container bs_container_size"},It=G({__name:"index",setup(e){let l=y("home");return(d,r)=>{const c=Le,i=Ae,o=Fe;return E(),j(Z,null,[u(c),N("div",Mt,[B(l)==="home"?(E(),se(St,{key:0})):(E(),se(wt,{key:1}))]),u(o,{modelValue:B(l),"onUpdate:modelValue":r[0]||(r[0]=a=>O(l)?l.value=a:l=a)},{default:S(()=>[u(i,{icon:"home-o",name:"home"},{default:S(()=>r[1]||(r[1]=[T("主页")])),_:1}),u(i,{icon:"setting-o",name:"setting"},{default:S(()=>r[2]||(r[2]=[T("配置")])),_:1})]),_:1},8,["modelValue"])],64)}}}),Lt=re(It,[["__scopeId","data-v-a2a5b6c8"]]);export{Lt as default};
