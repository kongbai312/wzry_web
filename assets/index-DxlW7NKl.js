import{A as Oe,B as $e,C as ze,D as qe,j as We,c as he,n as ne,E as W,m as He,e as oe,G as je,d as X,H as Ue,r as S,f as Ke,h as F,I as ce,J as Qe,K as Ye,l as Je,L as Y,M as ve,N as Ge,a as i,O as $,P as ue,Q as Xe,R as J,i as _e,s as be,S as Ze,w as pe,t as et,T as de,U as ye,o as D,p as tt,q as E,V as nt,W as p,X as ae,v as z,z as q,Y as G,F as U,Z as at,x as fe,_ as ot,$ as lt,a0 as st}from"./index-DWTpD4jv.js";import{u as ke,g as rt,S as it,T as ct,a as ut,b as dt,c as ft,d as gt}from"./search-AULeiF4E.js";import{c as mt,C as ht}from"./index-DnMmAVcU.js";import{u as Ie,P as vt,B as _t,m as bt}from"./vantTool-nFLXD37Z.js";import{_ as we}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{I as ee}from"./index-DJ78MK5i.js";import{F as pt}from"./use-route-qcc9JVac.js";function Ce(e){return Array.isArray(e)?!e.length:e===0?!1:!e}function yt(e,n){if(Ce(e)){if(n.required)return!1;if(n.validateEmpty===!1)return!0}return!(n.pattern&&!n.pattern.test(String(e)))}function kt(e,n){return new Promise(a=>{const u=n.validator(e,n);if(ze(u)){u.then(a);return}a(u)})}function ge(e,n){const{message:a}=n;return qe(a)?a(e,n):a||""}function It({target:e}){e.composing=!0}function me({target:e}){e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}function wt(e,n){const a=Oe();e.style.height="auto";let u=e.scrollHeight;if(We(n)){const{maxHeight:o,minHeight:c}=n;o!==void 0&&(u=Math.min(u,o)),c!==void 0&&(u=Math.max(u,c))}u&&(e.style.height=`${u}px`,$e(a))}function Ct(e){return e==="number"?{type:"text",inputmode:"decimal"}:e==="digit"?{type:"tel",inputmode:"numeric"}:{type:e}}function B(e){return[...e].length}function te(e,n){return[...e].slice(0,n).join("")}const[St,I]=he("field"),le={id:String,name:String,leftIcon:String,rightIcon:String,autofocus:Boolean,clearable:Boolean,maxlength:ne,formatter:Function,clearIcon:W("clear"),modelValue:He(""),inputAlign:String,placeholder:String,autocomplete:String,autocapitalize:String,autocorrect:String,errorMessage:String,enterkeyhint:String,clearTrigger:W("focus"),formatTrigger:W("onChange"),spellcheck:{type:Boolean,default:null},error:{type:Boolean,default:null},disabled:{type:Boolean,default:null},readonly:{type:Boolean,default:null}},xt=oe({},mt,le,{rows:ne,type:W("text"),rules:Array,autosize:[Boolean,Object],labelWidth:ne,labelClass:je,labelAlign:String,showWordLimit:Boolean,errorMessageAlign:String,colon:{type:Boolean,default:null}});var Vt=X({name:St,props:xt,emits:["blur","focus","clear","keypress","clickInput","endValidate","startValidate","clickLeftIcon","clickRightIcon","update:modelValue"],setup(e,{emit:n,slots:a}){const u=ke(),o=Ue({status:"unvalidated",focused:!1,validateMessage:""}),c=S(),C=S(),x=S(),{parent:m}=Ke(pt),_=()=>{var t;return String((t=e.modelValue)!=null?t:"")},f=t=>{if($(e[t]))return e[t];if(m&&$(m.props[t]))return m.props[t]},A=F(()=>{const t=f("readonly");if(e.clearable&&!t){const l=_()!=="",s=e.clearTrigger==="always"||e.clearTrigger==="focus"&&o.focused;return l&&s}return!1}),V=F(()=>x.value&&a.input?x.value():e.modelValue),T=F(()=>{var t;const l=f("required");return l==="auto"?(t=e.rules)==null?void 0:t.some(s=>s.required):l}),g=t=>t.reduce((l,s)=>l.then(()=>{if(o.status==="failed")return;let{value:d}=V;if(s.formatter&&(d=s.formatter(d,s)),!yt(d,s)){o.status="failed",o.validateMessage=ge(d,s);return}if(s.validator)return Ce(d)&&s.validateEmpty===!1?void 0:kt(d,s).then(v=>{v&&typeof v=="string"?(o.status="failed",o.validateMessage=v):v===!1&&(o.status="failed",o.validateMessage=ge(d,s))})}),Promise.resolve()),h=()=>{o.status="unvalidated",o.validateMessage=""},y=()=>n("endValidate",{status:o.status,message:o.validateMessage}),L=(t=e.rules)=>new Promise(l=>{h(),t?(n("startValidate"),g(t).then(()=>{o.status==="failed"?(l({name:e.name,message:o.validateMessage}),y()):(o.status="passed",l(),y())})):l()}),N=t=>{if(m&&e.rules){const{validateTrigger:l}=m.props,s=ue(l).includes(t),d=e.rules.filter(v=>v.trigger?ue(v.trigger).includes(t):s);d.length&&L(d)}},H=t=>{var l;const{maxlength:s}=e;if($(s)&&B(t)>+s){const d=_();if(d&&B(d)===+s)return d;const v=(l=c.value)==null?void 0:l.selectionEnd;if(o.focused&&v){const b=[...t],w=b.length-+s;return b.splice(v-w,w),b.join("")}return te(t,+s)}return t},P=(t,l="onChange")=>{const s=t;t=H(t);const d=B(s)-B(t);if(e.type==="number"||e.type==="digit"){const b=e.type==="number";t=Xe(t,b,b)}let v=0;if(e.formatter&&l===e.formatTrigger){const{formatter:b,maxlength:w}=e;if(t=b(t),$(w)&&B(t)>+w&&(t=te(t,+w)),c.value&&o.focused){const{selectionEnd:Q}=c.value,ie=te(s,Q);v=B(b(ie))-B(ie)}}if(c.value&&c.value.value!==t)if(o.focused){let{selectionStart:b,selectionEnd:w}=c.value;if(c.value.value=t,$(b)&&$(w)){const Q=B(t);d?(b-=d,w-=d):v&&(b+=v,w+=v),c.value.setSelectionRange(Math.min(b,Q),Math.min(w,Q))}}else c.value.value=t;t!==e.modelValue&&n("update:modelValue",t)},r=t=>{t.target.composing||P(t.target.value)},R=()=>{var t;return(t=c.value)==null?void 0:t.blur()},O=()=>{var t;return(t=c.value)==null?void 0:t.focus()},k=()=>{const t=c.value;e.type==="textarea"&&e.autosize&&t&&wt(t,e.autosize)},K=t=>{o.focused=!0,n("focus",t),Y(k),f("readonly")&&R()},M=t=>{o.focused=!1,P(_(),"onBlur"),n("blur",t),!f("readonly")&&(N("onBlur"),Y(k),Ze())},Z=t=>n("clickInput",t),xe=t=>n("clickLeftIcon",t),Ve=t=>n("clickRightIcon",t),Te=t=>{J(t),n("update:modelValue",""),n("clear",t)},se=F(()=>{if(typeof e.error=="boolean")return e.error;if(m&&m.props.showError&&o.status==="failed")return!0}),Be=F(()=>{const t=f("labelWidth"),l=f("labelAlign");if(t&&l!=="top")return{width:ce(t)}}),Ee=t=>{t.keyCode===13&&(!(m&&m.props.submitOnEnter)&&e.type!=="textarea"&&J(t),e.type==="search"&&R()),n("keypress",t)},re=()=>e.id||`${u}-input`,Le=()=>o.status,Pe=()=>{const t=I("control",[f("inputAlign"),{error:se.value,custom:!!a.input,"min-height":e.type==="textarea"&&!e.autosize}]);if(a.input)return i("div",{class:t,onClick:Z},[a.input()]);const l={id:re(),ref:c,name:e.name,rows:e.rows!==void 0?+e.rows:void 0,class:t,disabled:f("disabled"),readonly:f("readonly"),autofocus:e.autofocus,placeholder:e.placeholder,autocomplete:e.autocomplete,autocapitalize:e.autocapitalize,autocorrect:e.autocorrect,enterkeyhint:e.enterkeyhint,spellcheck:e.spellcheck,"aria-labelledby":e.label?`${u}-label`:void 0,onBlur:M,onFocus:K,onInput:r,onClick:Z,onChange:me,onKeypress:Ee,onCompositionend:me,onCompositionstart:It};return e.type==="textarea"?i("textarea",l,null):i("input",_e(Ct(e.type),l),null)},Re=()=>{const t=a["left-icon"];if(e.leftIcon||t)return i("div",{class:I("left-icon"),onClick:xe},[t?t():i(ee,{name:e.leftIcon,classPrefix:e.iconPrefix},null)])},Me=()=>{const t=a["right-icon"];if(e.rightIcon||t)return i("div",{class:I("right-icon"),onClick:Ve},[t?t():i(ee,{name:e.rightIcon,classPrefix:e.iconPrefix},null)])},Ae=()=>{if(e.showWordLimit&&e.maxlength){const t=B(_());return i("div",{class:I("word-limit")},[i("span",{class:I("word-num")},[t]),be("/"),e.maxlength])}},Ne=()=>{if(m&&m.props.showErrorMessage===!1)return;const t=e.errorMessage||o.validateMessage;if(t){const l=a["error-message"],s=f("errorMessageAlign");return i("div",{class:I("error-message",s)},[l?l({message:t}):t])}},Fe=()=>{const t=f("labelWidth"),l=f("labelAlign"),s=f("colon")?":":"";if(a.label)return[a.label(),s];if(e.label)return i("label",{id:`${u}-label`,for:a.input?void 0:re(),onClick:d=>{J(d),O()},style:l==="top"&&t?{width:ce(t)}:void 0},[e.label+s])},De=()=>[i("div",{class:I("body")},[Pe(),A.value&&i(ee,{ref:C,name:e.clearIcon,class:I("clear")},null),Me(),a.button&&i("div",{class:I("button")},[a.button()])]),Ae(),Ne()];return Ie({blur:R,focus:O,validate:L,formValue:V,resetValidation:h,getValidationStatus:Le}),Qe(Ye,{customValue:x,resetValidation:h,validateWithTrigger:N}),Je(()=>e.modelValue,()=>{P(_()),h(),N("onChange"),Y(k)}),ve(()=>{P(_(),e.formatTrigger),Y(k)}),Ge("touchstart",Te,{target:F(()=>{var t;return(t=C.value)==null?void 0:t.$el})}),()=>{const t=f("disabled"),l=f("labelAlign"),s=Re(),d=()=>{const v=Fe();return l==="top"?[s,v].filter(Boolean):v||[]};return i(ht,{size:e.size,class:I({error:se.value,disabled:t,[`label-${l}`]:l}),center:e.center,border:e.border,isLink:e.isLink,clickable:e.clickable,titleStyle:Be.value,valueClass:I("value"),titleClass:[I("label",[l,{required:T.value}]),e.labelClass],arrowDirection:e.arrowDirection},{icon:s&&l!=="top"?()=>s:null,title:d,value:De,extra:a.extra})}}});const Tt=pe(Vt),[Bt,j,Et]=he("search"),Lt=oe({},le,{label:String,shape:W("square"),leftIcon:W("search"),clearable:et,actionText:String,background:String,showAction:Boolean});var Pt=X({name:Bt,props:Lt,emits:["blur","focus","clear","search","cancel","clickInput","clickLeftIcon","clickRightIcon","update:modelValue"],setup(e,{emit:n,slots:a,attrs:u}){const o=ke(),c=S(),C=()=>{a.action||(n("update:modelValue",""),n("cancel"))},x=r=>{r.keyCode===13&&(J(r),n("search",e.modelValue))},m=()=>e.id||`${o}-input`,_=()=>{if(a.label||e.label)return i("label",{class:j("label"),for:m()},[a.label?a.label():e.label])},f=()=>{if(e.showAction){const r=e.actionText||Et("cancel");return i("div",{class:j("action"),role:"button",tabindex:0,onClick:C},[a.action?a.action():r])}},A=()=>{var r;return(r=c.value)==null?void 0:r.blur()},V=()=>{var r;return(r=c.value)==null?void 0:r.focus()},T=r=>n("blur",r),g=r=>n("focus",r),h=r=>n("clear",r),y=r=>n("clickInput",r),L=r=>n("clickLeftIcon",r),N=r=>n("clickRightIcon",r),H=Object.keys(le),P=()=>{const r=oe({},u,de(e,H),{id:m()}),R=O=>n("update:modelValue",O);return i(Tt,_e({ref:c,type:"search",class:j("field",{"with-message":r.errorMessage}),border:!1,onBlur:T,onFocus:g,onClear:h,onKeypress:x,onClickInput:y,onClickLeftIcon:L,onClickRightIcon:N,"onUpdate:modelValue":R},r),de(a,["left-icon","right-icon"]))};return Ie({focus:V,blur:A}),()=>{var r;return i("div",{class:j({"show-action":e.showAction}),style:{background:e.background}},[(r=a.left)==null?void 0:r.call(a),i("div",{class:j("content",e.shape)},[_(),P()]),f()])}}});const Rt=pe(Pt),Mt={class:"popupBottom"},At={class:"title"},Nt={class:"buttomBox"},Ft=X({__name:"popupBottom",props:{showBottom:{type:Boolean,default:!1}},emits:["showPopupFun"],setup(e,{emit:n}){const a=[{name:"安卓Q区",value:"aqq",type:"primary"},{name:"苹果Q区",value:"iqq",type:"success"},{name:"安卓V区",value:"awx",type:"warning"},{name:"苹果V区",value:"iwx",type:"danger"}],u=ye();let o=F(()=>u.heroName);const c=n,C=()=>{c("showPopupFun",!1)},x=nt(),m=_=>{u.setRegionValue(_),x.push("/battle")};return(_,f)=>{const A=_t,V=vt;return D(),tt(V,{onClickOverlay:C,show:_.showBottom,round:"",position:"bottom",style:{height:"35%"}},{default:E(()=>[p("div",Mt,[p("div",At,"当前查询【"+ae(z(o))+"】，请选择系统",1),p("div",Nt,[(D(),q(U,null,G(a,(T,g)=>i(A,{round:"",type:T.type,class:"buttomItem",key:g,onClick:h=>m(T.value)},{default:E(()=>[be(ae(T.name),1)]),_:2},1032,["type","onClick"])),64))])])]),_:1},8,["show"])}}}),Dt=we(Ft,[["__scopeId","data-v-f057b41e"]]),Se=e=>(lt("data-v-ee760a89"),e=e(),st(),e),Ot={class:"search_container"},$t=Se(()=>p("div",{class:"textbox"},[p("span",{class:"title"},"王者荣耀战力查询"),p("span",{class:"text"},"助您更好的拿下国标")],-1)),zt=Se(()=>p("div",{class:"textbox"},[p("span",{class:"title"},"如有什么问题"),p("span",{class:"text"},"前往设置联系作者")],-1)),qt={class:"heroList"},Wt={class:"heroList"},Ht=["onClick"],jt={class:"heroImg"},Ut={class:"heroText"},Kt=X({__name:"index",setup(e){let n=S("");const a=["全部","战士","法师","坦克","刺客","射手","辅助"];let u=S(0),o=S(),c=S(),C=S(!1);const x=async()=>{C.value=!0;let g=await rt();g.code===200?(o.value=g.data,c.value=g.data,C.value=!1):bt.info("当前网络不佳")};ve(()=>{x()});const m=g=>{var h;if(g===0){c.value=o.value;return}c.value=(h=o.value)==null?void 0:h.filter(y=>y.hero_type===g||y.hero_type2===g)},_=g=>{var y;let h=g.trim();h===""&&u.value!==0&&(u.value=0),c.value=(y=o.value)==null?void 0:y.filter(L=>L.cname.includes(h))};let f=S(!1);const A=ye(),V=g=>{f.value=g},T=g=>{V(!0),A.setHeroName(g)};return(g,h)=>{const y=ut,L=it,N=Rt,H=dt,P=ft,r=gt,R=ct,O=at("lazy");return D(),q(U,null,[p("div",Ot,[i(L,{class:"search_swipe",autoplay:6e3,"indicator-color":"white"},{default:E(()=>[i(y,null,{default:E(()=>[$t]),_:1}),i(y,null,{default:E(()=>[zt]),_:1})]),_:1}),i(N,{"onUpdate:modelValue":[_,h[0]||(h[0]=k=>fe(n)?n.value=k:n=k)],modelValue:z(n),placeholder:"请输入搜索英雄"},null,8,["modelValue"]),i(R,{active:z(u),"onUpdate:active":h[1]||(h[1]=k=>fe(u)?u.value=k:u=k),animated:"",onChange:m},{default:E(()=>[(D(),q(U,null,G(a,(k,K)=>i(r,{key:K,title:k,name:K},{default:E(()=>[i(P,{loading:z(C)},{template:E(()=>[p("div",qt,[(D(),q(U,null,G(20,M=>i(H,{class:"heroItem",key:M})),64))])]),default:E(()=>[p("div",Wt,[(D(!0),q(U,null,G(z(c),M=>(D(),q("div",{class:"heroItem",key:M.ename,onClick:Z=>T(M.cname)},[ot(p("img",jt,null,512),[[O,M.iconUrl]]),p("span",Ut,ae(M.cname),1)],8,Ht))),128))])]),_:2},1032,["loading"])]),_:2},1032,["title","name"])),64))]),_:1},8,["active"])]),i(Dt,{showBottom:z(f),onShowPopupFun:V},null,8,["showBottom"])],64)}}}),tn=we(Kt,[["__scopeId","data-v-ee760a89"]]);export{tn as default};
