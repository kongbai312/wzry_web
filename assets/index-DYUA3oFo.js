import{c as M,d as H,a as l,F as Y,t as R,i as Z,w as L,n as q,m as re,A as ie,r as p,u as ce,B as ue,h as E,C as de,D as pe,E as ve,G as X,H as me,I as _e,f as he,T as fe,J as we,K as F,L as ge,M as xe,N as Ce,g as be,O as K,o as U,z as j,v as w,P as n,Q as O,q as V,R as J,x as ye,S as Ie,p as Pe,U as ke,V as Oe}from"./index-CBCQ6Rvf.js";import{C as ee}from"./index-DJ23qM7C.js";import{N as Se}from"./index-C_5_FK3l.js";import{r as te}from"./request-fy6jD9Fe.js";import{I as oe,_ as Be}from"./_plugin-vue_export-helper-Cmma1cYV.js";import{u as De}from"./use-id-gROM3XTf.js";import{u as ne}from"./use-expose-C8j5eqMI.js";import{B as Te,H as $e}from"./use-route-CObrCZIx.js";import{u as Re,P as Ve}from"./index-l_Y4M4gX.js";import"./interceptor-BBcVuyCw.js";const[ze,Q]=M("cell-group"),Ae={title:String,inset:Boolean,border:R};var Ee=H({name:ze,inheritAttrs:!1,props:Ae,setup(t,{slots:c,attrs:d}){const v=()=>{var u;return l("div",Z({class:[Q({inset:t.inset}),{[Te]:t.border&&!t.inset}]},d,Re()),[(u=c.default)==null?void 0:u.call(c)])},a=()=>l("div",{class:Q("title",{inset:t.inset})},[c.title?c.title():t.title]);return()=>t.title||c.title?l(Y,null,[a(),v()]):v()}});const He=L(Ee),[ae,z]=M("dropdown-menu"),Ne={overlay:R,zIndex:q,duration:re(.2),direction:ie("down"),activeColor:String,autoLocate:Boolean,closeOnClickOutside:R,closeOnClickOverlay:R,swipeThreshold:q},se=Symbol(ae);var We=H({name:ae,props:Ne,setup(t,{slots:c}){const d=De(),v=p(),a=p(),u=p(0),{children:r,linkChildren:S}=ce(se),_=ue(v),g=E(()=>r.some(e=>e.state.showWrapper)),b=E(()=>t.swipeThreshold&&r.length>+t.swipeThreshold),I=E(()=>{if(g.value&&de(t.zIndex))return{zIndex:+t.zIndex+1}}),h=()=>{r.forEach(e=>{e.toggle(!1)})},B=()=>{t.closeOnClickOutside&&h()},x=()=>{if(a.value){const e=X(a);t.direction==="down"?u.value=e.bottom:u.value=me.value-e.top}},C=()=>{g.value&&x()},D=e=>{r.forEach((o,s)=>{s===e?o.toggle():o.state.showPopup&&o.toggle(!1,{immediate:!0})})},P=(e,o)=>{const{showPopup:s}=e.state,{disabled:i,titleClass:y}=e;return l("div",{id:`${d}-${o}`,role:"button",tabindex:i?void 0:0,class:[z("item",{disabled:i,grow:b.value}),{[$e]:!i}],onClick:()=>{i||D(o)}},[l("span",{class:[z("title",{down:s===(t.direction==="down"),active:s}),y],style:{color:s?t.activeColor:""}},[l("div",{class:"van-ellipsis"},[e.renderTitle()])])])};return ne({close:h}),S({id:d,props:t,offset:u,updateOffset:x}),pe(v,B),ve("scroll",C,{target:_,passive:!0}),()=>{var e;return l("div",{ref:v,class:z()},[l("div",{ref:a,style:I.value,class:z("bar",{opened:g.value,scrollable:b.value})},[r.map(P)]),(e=c.default)==null?void 0:e.call(c)])}}});const[Ue,A]=M("dropdown-item"),Me={title:String,options:we(),disabled:Boolean,teleport:[String,Object],lazyRender:R,modelValue:F,titleClass:F};var Le=H({name:Ue,inheritAttrs:!1,props:Me,emits:["open","opened","close","closed","change","update:modelValue"],setup(t,{emit:c,slots:d,attrs:v}){const a=_e({showPopup:!1,transition:!0,showWrapper:!1}),u=p(),{parent:r,index:S}=he(se);if(!r)return;const _=e=>()=>c(e),g=_("open"),b=_("close"),I=_("opened"),h=()=>{a.showWrapper=!1,c("closed")},B=e=>{t.teleport&&e.stopPropagation()},x=(e=!a.showPopup,o={})=>{e!==a.showPopup&&(a.showPopup=e,a.transition=!o.immediate,e&&(r.updateOffset(),a.showWrapper=!0))},C=()=>{if(d.title)return d.title();if(t.title)return t.title;const e=t.options.find(o=>o.value===t.modelValue);return e?e.text:""},D=e=>{const{activeColor:o}=r.props,s=e.value===t.modelValue,i=()=>{a.showPopup=!1,e.value!==t.modelValue&&(c("update:modelValue",e.value),c("change",e.value))},y=()=>{if(s)return l(oe,{class:A("icon"),color:o,name:"success"},null)};return l(ee,{role:"menuitem",key:String(e.value),icon:e.icon,title:e.text,class:A("option",{active:s}),style:{color:s?o:""},tabindex:s?0:-1,clickable:!0,onClick:i},{value:y})},P=()=>{const{offset:e}=r,{autoLocate:o,zIndex:s,overlay:i,duration:y,direction:T,closeOnClickOverlay:W}=r.props,$=be(s);let k=e.value;if(o&&u.value){const m=ge(u.value);m&&(k-=X(m).top)}return T==="down"?$.top=`${k}px`:$.bottom=`${k}px`,xe(l("div",Z({ref:u,style:$,class:A([T]),onClick:B},v),[l(Ve,{show:a.showPopup,"onUpdate:show":m=>a.showPopup=m,role:"menu",class:A("content"),overlay:i,position:T==="down"?"top":"bottom",duration:a.transition?y:0,lazyRender:t.lazyRender,overlayStyle:{position:"absolute"},"aria-labelledby":`${r.id}-${S.value}`,closeOnClickOverlay:W,onOpen:g,onClose:b,onOpened:I,onClosed:h},{default:()=>{var m;return[t.options.map(D),(m=d.default)==null?void 0:m.call(d)]}})]),[[Ce,a.showWrapper]])};return ne({state:a,toggle:x,renderTitle:C}),()=>t.teleport?l(fe,{to:t.teleport},{default:()=>[P()]}):P()}});const Ge=L(Le),qe=L(We),le="https://api.vvhan.com",Fe=()=>te({url:le+"/api/weather",method:"get"}),Ke=t=>te({url:le+"/api/hotlist/"+t,method:"get"}),N=t=>(ke("data-v-9dd778af"),t=t(),Oe(),t),je={class:"homeBox"},Je={class:"weather_container"},Qe=N(()=>n("div",{class:"weather_img"},[n("svg",{"aria-hidden":"true"},[n("use",{href:"#icon-weather-cloudy"})])],-1)),Ye={class:"weather_Item"},Ze=N(()=>n("span",{class:"title"},"空气质量",-1)),Xe={class:"text"},et={class:"weather_Item"},tt=N(()=>n("span",{class:"title"},"最低气温",-1)),ot={class:"text"},nt={class:"weather_Item"},at=N(()=>n("span",{class:"title"},"最高气温",-1)),st={class:"text"},lt={class:"hot_container"},rt={class:"top"},it={class:"top_title"},ct={class:"title"},ut={class:"top_right"},dt={class:"cellItem_title"},pt=H({__name:"index",setup(t){let c=p("O.o？"),d=p(),v=p();const a=async()=>{let e=await Fe();e.success===!0&&(d.value=e.data,v.value=e.air,c.value=e.tip)};K(()=>{a()});const u=p(0),r=[{text:"微博热搜",value:0,name:"wbHot"},{text:"抖音热点",value:1,name:"douyinHot"},{text:"百度热搜",value:2,name:"baiduRD"},{text:"知乎热点",value:3,name:"zhihuHot"},{text:"今日头条",value:4,name:"toutiao"},{text:"知乎日报",value:5,name:"zhihuDay"},{text:"B站日榜",value:6,name:"bili"}],S=e=>{I(r[e].name)};let _=p(!1);const g=()=>{_.value=!_.value};let b=p();const I=async e=>{var s;let o=await Ke(e);b.value=(s=o.data)==null?void 0:s.map(i=>({index:i.index,hot:i.hot,mobileUrl:i.mobilUrl,url:i.url,title:i.title}))};K(()=>{I(r[u.value].name)});let h=p(0),B=E(()=>{var s;let e=h.value*10,o=e+10;return(s=b.value)==null?void 0:s.slice(e,o)}),x=p(!1),C=null;const D=()=>{x.value=!0,h.value++,h.value===3&&(h.value=0),C&&clearTimeout(C),C=setTimeout(()=>{x.value=!1,C=null},300)},P=e=>{window.open(e.mobileUrl,"_blank")};return(e,o)=>{var k,m,G;const s=Se,i=oe,y=Ge,T=qe,W=ee,$=He;return U(),j("div",je,[l(s,{class:"home_noticeBar","left-icon":"volume-o",text:w(c)},null,8,["text"]),n("div",Je,[Qe,n("div",Ye,[Ze,n("span",Xe,O((k=w(v))==null?void 0:k.aqi_name),1)]),n("div",et,[tt,n("span",ot,O((m=w(d))==null?void 0:m.low),1)]),n("div",nt,[at,n("span",st,O((G=w(d))==null?void 0:G.high),1)])]),n("div",lt,[n("div",rt,[l(T,null,{default:V(()=>[l(y,{modelValue:w(u),"onUpdate:modelValue":o[0]||(o[0]=f=>ye(u)?u.value=f:null),options:r,onOpen:g,onClose:g,onChange:S},{title:V(()=>[n("div",it,[n("div",ct,O(r[w(u)].text),1),l(i,{name:w(_)?"arrow-down":"arrow"},null,8,["name"])])]),_:1},8,["modelValue"])]),_:1}),n("div",ut,[l(i,{name:"replay",class:J(["right_icon",{right_icon_rotate:w(x)}])},null,8,["class"]),n("span",{onClick:D},"换一批")])]),l($,null,{default:V(()=>[(U(!0),j(Y,null,Ie(w(B),f=>(U(),Pe(W,{key:f.index,title:f.title,"title-class":"cellItem_titleBox",onClick:vt=>P(f)},{title:V(()=>[n("span",{class:J(["cellItem_index",f.index<=3?`hot_class_${f.index}`:""])},O(f.index),3),n("span",dt,O(f.title),1)]),_:2},1032,["title","onClick"]))),128))]),_:1})])])}}}),It=Be(pt,[["__scopeId","data-v-9dd778af"]]);export{It as default};
