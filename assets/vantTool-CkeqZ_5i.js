import{r as F,u as H,d as K}from"./use-route-CObrCZIx.js";import{I as $}from"./_plugin-vue_export-helper-Cmma1cYV.js";import{c as B,a,d as O,h as W,e as S,aq as X,n as v,A as d,aj as G,w as I,X as J,l as P,O as Q,au as Y,i as j,W as Z,av as ee,K as U,C as ne,aw as te,I as oe,a8 as ae,j as ie,r as se,b as le}from"./index-CBCQ6Rvf.js";import{u as ce}from"./use-expose-C8j5eqMI.js";import{P as re}from"./index-l_Y4M4gX.js";const[ue,h]=B("loading"),de=Array(12).fill(null).map((e,n)=>a("i",{class:h("line",String(n+1))},null)),fe=a("svg",{class:h("circular"),viewBox:"25 25 50 50"},[a("circle",{cx:"50",cy:"50",r:"20",fill:"none"},null)]),ge={size:v,type:d("circular"),color:String,vertical:Boolean,textSize:v,textColor:String};var me=O({name:ue,props:ge,setup(e,{slots:n}){const t=W(()=>S({color:e.color},X(e.size))),c=()=>{const s=e.type==="spinner"?de:fe;return a("span",{class:h("spinner",e.type),style:t.value},[n.icon?n.icon():s])},l=()=>{var s;if(n.default)return a("span",{class:h("text"),style:{fontSize:G(e.textSize),color:(s=e.textColor)!=null?s:e.color}},[n.default()])};return()=>{const{type:s,vertical:u}=e;return a("div",{class:h([s,{vertical:u}]),"aria-live":"polite","aria-busy":!0},[c(),l()])}}});const D=I(me),[ye,m]=B("button"),ve=S({},F,{tag:d("button"),text:String,icon:String,type:d("default"),size:d("normal"),color:String,block:Boolean,plain:Boolean,round:Boolean,square:Boolean,loading:Boolean,hairline:Boolean,disabled:Boolean,iconPrefix:String,nativeType:d("button"),loadingSize:v,loadingText:String,loadingType:String,iconPosition:d("left")});var Se=O({name:ye,props:ve,emits:["click"],setup(e,{emit:n,slots:t}){const c=H(),l=()=>t.loading?t.loading():a(D,{size:e.loadingSize,type:e.loadingType,class:m("loading")},null),s=()=>{if(e.loading)return l();if(t.icon)return a("div",{class:m("icon")},[t.icon()]);if(e.icon)return a($,{name:e.icon,class:m("icon"),classPrefix:e.iconPrefix},null)},u=()=>{let o;if(e.loading?o=e.loadingText:o=t.default?t.default():e.text,o)return a("span",{class:m("text")},[o])},b=()=>{const{color:o,plain:g}=e;if(o){const i={color:g?o:"white"};return g||(i.background=o),o.includes("gradient")?i.border=0:i.borderColor=o,i}},f=o=>{e.loading?J(o):e.disabled||(n("click",o),c())};return()=>{const{tag:o,type:g,size:i,block:r,round:C,plain:x,square:w,loading:z,disabled:T,hairline:M,nativeType:E,iconPosition:N}=e,V=[m([g,i,{plain:x,block:r,round:C,square:w,loading:z,disabled:T,hairline:M}]),{[K]:M}];return a(o,{type:E,class:V,style:b(),disabled:T,onClick:f},{default:()=>[a("div",{class:m("content")},[N==="left"&&s(),u(),N==="right"&&s()])]})}}});const je=I(Se);let k=0;function be(e){e?(k||document.body.classList.add("van-toast--unclickable"),k++):k&&(k--,k||document.body.classList.remove("van-toast--unclickable"))}const[ke,y]=B("toast"),he=["show","overlay","teleport","transition","overlayClass","overlayStyle","closeOnClickOverlay","zIndex"],Ce={icon:String,show:Boolean,type:d("text"),overlay:Boolean,message:v,iconSize:v,duration:ee(2e3),position:d("middle"),teleport:[String,Object],wordBreak:String,className:U,iconPrefix:String,transition:d("van-fade"),loadingType:String,forbidClick:Boolean,overlayClass:U,overlayStyle:Object,closeOnClick:Boolean,closeOnClickOverlay:Boolean,zIndex:v};var L=O({name:ke,props:Ce,emits:["update:show"],setup(e,{emit:n,slots:t}){let c,l=!1;const s=()=>{const i=e.show&&e.forbidClick;l!==i&&(l=i,be(l))},u=i=>n("update:show",i),b=()=>{e.closeOnClick&&u(!1)},f=()=>clearTimeout(c),o=()=>{const{icon:i,type:r,iconSize:C,iconPrefix:x,loadingType:w}=e;if(i||r==="success"||r==="fail")return a($,{name:i||r,size:C,class:y("icon"),classPrefix:x},null);if(r==="loading")return a(D,{class:y("loading"),size:C,type:w},null)},g=()=>{const{type:i,message:r}=e;if(t.message)return a("div",{class:y("text")},[t.message()]);if(ne(r)&&r!=="")return i==="html"?a("div",{key:0,class:y("text"),innerHTML:String(r)},null):a("div",{class:y("text")},[r])};return P(()=>[e.show,e.forbidClick],s),P(()=>[e.show,e.type,e.message,e.duration],()=>{f(),e.show&&e.duration>0&&(c=setTimeout(()=>{u(!1)},e.duration))}),Q(s),Y(s),()=>a(re,j({class:[y([e.position,e.wordBreak==="normal"?"break-normal":e.wordBreak,{[e.type]:!e.icon}]),e.className],lockScroll:!1,onClick:b,onClosed:f,"onUpdate:show":u},Z(e,he)),{default:()=>[o(),g()]})}});function pe(){const e=oe({show:!1}),n=l=>{e.show=l},t=l=>{S(e,l,{transitionAppear:!0}),n(!0)},c=()=>n(!1);return ce({open:t,close:c,toggle:n}),{open:t,close:c,state:e,toggle:n}}function xe(e){const n=te(e),t=document.createElement("div");return document.body.appendChild(t),{instance:n.mount(t),unmount(){n.unmount(),document.body.removeChild(t)}}}const we={icon:"",type:"text",message:"",className:"",overlay:!1,onClose:void 0,onOpened:void 0,duration:2e3,teleport:"body",iconSize:void 0,iconPrefix:void 0,position:"middle",transition:"van-fade",forbidClick:!1,loadingType:void 0,overlayClass:"",overlayStyle:void 0,closeOnClick:!1,closeOnClickOverlay:!1};let p=[],Pe=!1,_=S({},we);const Be=new Map;function R(e){return ie(e)?e:{message:e}}function Oe(){const{instance:e,unmount:n}=xe({setup(){const t=se(""),{open:c,state:l,close:s,toggle:u}=pe(),b=()=>{},f=()=>a(L,j(l,{onClosed:b,"onUpdate:show":u}),null);return P(t,o=>{l.message=o}),le().render=f,{open:c,close:s,message:t}}});return e}function Ie(){if(!p.length||Pe){const e=Oe();p.push(e)}return p[p.length-1]}function q(e={}){if(!ae)return{};const n=Ie(),t=R(e);return n.open(S({},_,Be.get(t.type||_.type),t)),n}const A=e=>n=>q(S({type:e},R(n))),ze=A("success"),Te=A("fail");I(L);const De={success:(e,n)=>{ze({message:e,position:n})},info:(e,n)=>{q({message:e,position:n})},fail:(e,n)=>{Te({message:e,position:n})}};export{je as B,xe as a,De as m,pe as u};
